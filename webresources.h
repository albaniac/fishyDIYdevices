//the beginning, page styles, and opening of the script for the JSON variable
const char WEBSTRPT1[] PROGMEM ="<!DOCTYPE html><title>fishDIY Device Network</title><meta content=\"width=device-width,initial-scale=1\"name=viewport><script src=https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script><style>:root{--big-fnt:25px;--mid-fnt:20px;--sml-fnt:15px;--drk-col:#3366cc;--lght-col:#ffffff;--gry-col:#edf3ff;--cp-sz:300px;--lab-sz:90px;--val-sz:65px;--sld-sz:125px;--rad-sz:25px;--hdr-ht:100px;--smrad-sz:7px;--thm-sz:25px;--sld-ht:10px;--sld-mar:5px;--sldRow-mar:4px;--sldRow-ht:30px;--btnRow-mar:2px;--btnRow-ht:30px;--btn-ht:28px;--cfg-lab:120;--cfg-inp:180}body{background-color:var(--gry-col);font-family:\"Lucida Sans Unicode\",\"Lucida Grande\",sans-serif}.flex-container{display:flex;flex-wrap:wrap;justify-content:center;background-color:var(--gry-col)}.flex-container>div{border-radius:var(--rad-sz);background-color:var(--lght-col);width:calc(var(--cp-sz)+10);margin:5px;vertical-align:middle;text-align:center;line-height:calc(var(--mid-fnt) + 2);font-size:var(--mid-fnt)}.fishyFtr{border-radius:var(--rad-sz);font-size:var(--mid-fnt);font-weight:700;color:#fff;background:var(--drk-col);height:calc(var(--mid-fnt)+10);align:center}.fishyHdr,.hdrIcon{border-radius:var(--rad-sz);font-size:calc(var(--hdr-ht)/3);font-weight:700;color:#fff;background:var(--drk-col);height:var(--hdr-ht);vertical-align:middle}.CP{width:var(--cp-sz);flex:0 1 var(--cp-sz)}.CPhd,.CPhd2{width:var(--cp-sz);color:#fff;background-color:var(--drk-col)}.CPhd{border-radius:var(--rad-sz) var(--rad-sz) 0 0;font-size:var(--big-fnt)}.sld{position:absolute;top:var(--sld-mar);left:var(--lab-sz);-webkit-appearance:none;width:var(--sld-sz);height:var(--sld-ht);background:var(--gry-col);outline:0;opacity:.7;-webkit-transition:.2s;transition:opacity .2s}.sld:hover{opacity:1}.sld::-webkit-slider-thumb{border-radius:var(--smrad-sz);-webkit-appearance:none;width:var(--thm-sz);height:var(--thm-sz);background:var(--drk-col);cursor:pointer}.sld::-moz-range-thumb{border-radius:var(--smrad-sz);width:var(--thm-sz);height:var(--thm-sz);background:var(--drk-col);cursor:pointer}.sldRow{position:relative;top:var(--sldRow-mar);width:var(--cp-sz);height:var(--sldRow-ht)}.sldLab{position:absolute;top:0;left:0;width:var(--lab-sz);font-size:var(--mid-fnt)}.sldVal{position:absolute;top:0;left:calc(var(--cp-sz) - var(--val-sz));background-color:#fff;border:none;font-size:var(--mid-fnt);width:var(--val-sz)}.btnRow{position:relative;top:var(--btnRow-mar);width:var(--cp-sz);height:var(--btnRow-ht)}.cfgBtn,.lftBtn,.midBtn,.rgtBtn,.tglBtn{background-color:var(--drk-col);height:var(--btn-ht);border:1px solid #fff;color:#fff;text-align:center;text-decoration:none;display:inline-block;cursor:pointer}.lftBtn{border-radius:var(--smrad-sz) 0 0 var(--smrad-sz);width:calc(var(--cp-sz)/4)}.rgtBtn{border-radius:0 var(--smrad-sz) var(--smrad-sz) 0;width:calc(var(--cp-sz)/4)}.midBtn{width:calc(var(--cp-sz)/2)}.cfgPnl{display:none}.cfgInpLab{width:var(--cfg-lab);font-size:var(--sml-fnt)}.cfgInp{width:var(--cfg-inp);background-color:#fff;border:none;font-size:var(--sml-fnt)}.cfgBtn{border-radius:var(--smrad-sz);width:48%;font-weight:700;background-color:red}.calTxt{font-size:var(--sml-fnt);color:var(--drk-col)}.tglBtn{border-radius:var(--smrad-sz) var(--smrad-sz) var(--rad-sz) var(--rad-sz);width:100%}.sw{position:relative;display:inline-block;width:60px;height:34px}.sw input{display:none}.swLab{position:relative;top:-10px}.sldSw{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s;border-radius:34px}.sldSw:before{position:absolute;content:'';height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.sldSw{background-color:var(--drk-col)}input:focus+.sldSw{box-shadow:0 0 1px var(--drk-col)}input:checked+.sldSw:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}</style><script>";
//fishyNetJSON will be inserted here, ther following line transtions from that to the SVG.
const char WEBSTRPT2[] PROGMEM = "</script></head><body><div class=\"fishyHdr\">";
//the svg image
const char WEBSTRPT3[] PROGMEM = " <span >fishyControls</span></div>";

//the scripts
const char WEBSTRPT4[] PROGMEM ="<script>function toggleCfg(e){var t=$(\"#cfgBtn-\"+e)[0],l=$(\"#cfgPnl-\"+e)[0];\"block\"==l.style.display?(l.style.display=\"none\",t.value=\"[+] Show Config Panel\"):(l.style.display=\"block\",t.value=\"[-] Hide Config Panel\")}function sync(e,t,l){var s=\"#\"+t+\"Val-\"+e,a=$(\"#\"+t+\"Sld-\"+e)[0],n=$(s)[0];if(\"pctOpen\"==t)var o=$(\"#pobtn-\"+e)[0];1==l?(n.value=a.value,\"pctOpen\"==t&&(o.value=\"Go \"+a.value+\"% Open\")):(a.value=n.value,\"pctOpen\"==t&&(o.value=\"Go \"+n.value+\"% Open\"))}function refreshToggle(){var e=$(\"#swRefreshLab-1\")[0];1==$(\"#swRefreshChck-1\")[0].checked?(e.innerHTML=\"Auto-refresh On\",pollTimer=setTimeout(function(){pollJSON()},1e4)):(e.innerHTML=\"Auto-refresh Off\",clearTimeout(pollTimer))}function openIsCCWUpd(e){var t=$(\"#swLab-\"+e)[0];1==$(\"#swChck-\"+e)[0].checked?t.innerHTML=\"Open is CCW\":t.innerHTML=\"Open is CW\"}function swMstrUpd(e){var t=$(\"#swMstrLab-\"+e)[0];1==$(\"#swMstrChck-\"+e)[0].checked?t.innerHTML=\"Master Node\":t.innerHTML=\"Slave Node\"}function sendCmd(e,t){var l=$(\"#targetIP-\"+e)[0].value,s=\"\";if(\"O\"==t)s=\"open\";else if(\"C\"==t)s=\"close\";else if(\"cal\"==t)s=\"calibrate\";else if(\"rstWifi\"==t)s=\"reset_wifi\";else if(\"G\"==t){var a;for(s=\"goto\",a=$(\"#pctOpenVal-\"+e)[0].value;a.length<3;)a=\"0\"+a;s+=a}else if(\"config\"==t){var n=\"false\",o=\"false\";$(\"#swMstrChck-\"+e)[0].checked&&(n=\"true\"),$(\"#swChck-\"+e)[0].checked&&(o=\"true\"),s=\"config\",s+=\";ccwLim=\"+$(\"#ccwLimVal-\"+e)[0].value,s+=\";cwLim=\"+$(\"#cwLimVal-\"+e)[0].value,s+=\";openIsCCW=\"+o,s+=\";isMaster=\"+n,s+=\";devName=\"+encodeURIComponent($(\"#devName-\"+e)[0].value),s+=\";groupName=\"+encodeURIComponent($(\"#groupName-\"+e)[0].value),s+=\";devType=\"+encodeURIComponent($(\"#devType-\"+e)[0].value),s+=\";note=\"+encodeURIComponent($(\"#note-\"+e)[0].value)}var c=\"/genericArgs?IPCommand=\"+l+\";\"+s;$.get(c,function(){alert(\"Success.\")})}function pollJSON(){$.getJSON(\"./device.JSON\",function(e){var l,t=e.fishyDevices,s=\"\",a=\"\";$.each(t,function(e,t){\"0\"==t.dead&&(l=t.deviceID,null==$(\"#pctOpenVal-\"+l)[0]?$(addDevice(t)).appendTo(\".flex-container\"):(s=\"true\"==t.isMaster?\"MASTER \":\"\",a=\"false\"==t.isCalibrated?\"LIMITS ARE UNCALIBRATED<br>\":\"\",\"true\"==t.openIsCCW?\"checked\":\"\",$(\"#hd1-\"+l)[0].innerHTML=t.deviceName,$(\"#hd2-\"+l)[0].innerHTML=\"(\"+s+t.IP+\")\",$(\"#note-\"+l)[0].value=t.note,$(\"#devName-\"+l)[0].value=t.deviceName,$(\"#groupName-\"+l)[0].value=t.group,$(\"#devType-\"+l)[0].value=t.devType,$(\"#pctOpenVal-\"+l)[0].value=posPct(t.motorPos,t.motorPosAtCCW,t.motorPosAtCW,t.openIsCCW),$(\"#pctOpenSld-\"+l)[0].value=posPct(t.motorPos,t.motorPosAtCCW,t.motorPosAtCW,t.openIsCCW),$(\"#ccwLimVal-\"+l)[0].value=t.motorPosAtCCW,$(\"#ccwLimVal-\"+l)[0].min=t.motorPosAtFullCCW,$(\"#ccwLimVal-\"+l)[0].max=t.motorPosAtFullCW,$(\"#ccwLimSld-\"+l)[0].value=t.motorPosAtCCW,$(\"#ccwLimSld-\"+l)[0].min=t.motorPosAtFullCCW,$(\"#ccwLimSld-\"+l)[0].max=t.motorPosAtFullCW,$(\"#cwLimVal-\"+l)[0].value=t.motorPosAtCW,$(\"#cwLimVal-\"+l)[0].min=t.motorPosAtFullCCW,$(\"#cwLimVal-\"+l)[0].max=t.motorPosAtFullCW,$(\"#cwLimSld-\"+l)[0].value=t.motorPosAtCW,$(\"#cwLimSld-\"+l)[0].min=t.motorPosAtFullCCW,$(\"#cwLimSld-\"+l)[0].max=t.motorPosAtFullCW,$(\"#calTxt-\"+l)[0].innerHTML=a))}),$(\".CP\").each(function(e,l){!0,$.each(t,function(e,t){t.deviceID==l.id&&!1})}),pollTimer=setTimeout(function(){pollJSON()},1e4)})}function posPct(e,t,l,s){if(l-t==0)return 0;var a=Math.round((e-t)/(l-t)*100);return\"true\"==s&&(a=100-a),a}function addDevice(e){if(\"true\"==e.isMaster?(mstrTxt=\"MASTER \",mstrChckTxt=\"checked\"):(mstrTxt=\"\",mstrChckTxt=\"\"),\"false\"==e.isCalibrated?calTxt=\"LIMITS ARE UNCALIBRATED<br>\":calTxt=\"\",\"true\"==e.openIsCCW?chckTxt=\"checked\":chckTxt=\"\",\"0\"==e.dead){var t=e.deviceID;return\"<div class='CP' id='\"+t+\"'><input type='hidden' id='targetIP-\"+t+\"' value='\"+e.IP+\"'><div class='CPhd' id='hd1-\"+t+\"'>\"+e.deviceName+\"</div><div class='CPhd2' id='hd2-\"+t+\"'>(\"+mstrTxt+\" \"+e.IP+\")</div><div class='sldRow'>\\t<div class='sldLab'>% Open</div><input class='sld' id='pctOpenSld-\"+t+\"' type='range' value='\"+posPct(e.motorPos,e.motorPosAtCCW,e.motorPosAtCW,e.openIsCCW)+\"' max='100' min='0' oninput=sync(\"+t+\",'pctOpen',1)> <input class='sldVal' id='pctOpenVal-\"+t+\"' type='number' value='\"+posPct(e.motorPos,e.motorPosAtCCW,e.motorPosAtCW,e.openIsCCW)+\"' max='100' min='0' onchange=sync(\"+t+\",'pctOpen',2)></div><div class='btnRow'><input class='lftBtn' id='fobtn-\"+t+\"' type='button' value='Full Open' onclick=sendCmd(\"+t+\",'O')><input class='midBtn' id='pobtn-\"+t+\"' type='button' value='Go % Open' onclick=sendCmd(\"+t+\",'G')><input class='rgtBtn' id='fcbtn-\"+t+\"' type='button' value='Full Close' onclick=sendCmd(\"+t+\",'C')></div><div class='cfgPnl' id='cfgPnl-\"+t+\"' style='display: hidden;'><hr><label class='cfgInpLab' for='devNote-\"+t+\"'>Note:<input class='cfgInp' id='note-\"+t+\"' value='\"+e.note+\"' maxlength='55'></label><div class='calTxt' id='calTxt-\"+t+\"'>\"+calTxt+\"</div>\\t<div class='sldRow'>\\t\\t<div class='sldLab'>CCW Lim</div><input class='sld' id='ccwLimSld-\"+t+\"' type='range' value='\"+e.motorPosAtCCW+\"' max='\"+e.motorPosAtFullCW+\"' min='\"+e.motorPosAtFullCCW+\"' oninput=sync(\"+t+\",'ccwLim',1)> <input class='sldVal' id='ccwLimVal-\"+t+\"' type='number' value='\"+e.motorPosAtCCW+\"' max='\"+e.motorPosAtFullCW+\"' min='\"+e.motorPosAtFullCCW+\"' onchange=sync(\"+t+\",'ccwLim',2)>\\t</div>\\t<div class='sldRow'>\\t\\t<div class='sldLab'>CW Lim</div><input class='sld' id='cwLimSld-\"+t+\"' type='range' value='\"+e.motorPosAtCW+\"' max='\"+e.motorPosAtFullCW+\"' min='+d.motorPosAtCCW+' oninput=sync(\"+t+\",'cwLim',1)> <input class='sldVal' id='cwLimVal-\"+t+\"' type='number' value='\"+e.motorPosAtCW+\"' max='\"+e.motorPosAtFullCW+\"' min='\"+e.motorPosAtFullCCW+\"' onchange=sync(\"+t+\",'cwLim',2)>\\t</div>\\t<div class='swRow'>\\t\\t<label class='sw' id='sw-\"+t+\"'><input type='checkbox' id='swChck-\"+t+\"' \"+chckTxt+\" onchange=openIsCCWUpd(\"+t+\")><span class='sldSw'></span></label><span class='swLab' id='swLab-\"+t+\"'>Open is CCW</span>\\t</div>\\t<div class='swRow'>\\t\\t<label class='sw' id='swMstr-\"+t+\"'><input type='checkbox' id='swMstrChck-\"+t+\"' \"+mstrChckTxt+\" onchange=swMstrUpd(\"+t+\")><span class='sldSw'></span></label><span class='swLab' id='swMstrLab-\"+t+\"'>Master Node</span>\\t</div>\\t<label class='cfgInpLab' for='devName-\"+t+\"'>Device Name:<input class='cfgInp' id='devName-\"+t+\"' value='\"+e.deviceName+\"' maxlength='40'></label>\\t<label class='cfgInpLab' for='devGroup-\"+t+\"'>Group Name:<input class='cfgInp' id='groupName-\"+t+\"' value='\"+e.group+\"' maxlength='40'></label>\\t<label class='cfgInpLab' for='devType-\"+t+\"'>Device Type:<input class='cfgInp' id='devType-\"+t+\"' value='\"+e.devType+\"' maxlength='20'></label>\\t<label class='cfgInpLab' >SW Version:<span class='cfgInp' id='devSWver-\"+t+\"'>\"+e.swVer+\"</span></label>\\t<div class='btnRow'>\\t<input class='cfgBtn' id='updCfgBtn-\"+t+\"' type='button' value='UPDATE CONFIG' onclick=sendCmd(\"+t+\",'config')><input class='cfgBtn' id='updCfgBtn-\"+t+\"' type='button' value='CALIBRATE' onclick=sendCmd(\"+t+\",'cal')>\\t</div><div class='btnRow'>\\t<input class='cfgBtn' id='rstWifiBtn-\"+t+\"' type='button' value='RESET WIFI' onclick=sendCmd(\"+t+\",'rstWifi')>\\t</div>\\t<hr></div><div class='btnRow'><input class='tglBtn' id='cfgBtn-\"+t+\"' type='button' value='[+] Show Control Panel' onclick=toggleCfg(\"+t+\")></div></div>\"}}var pollTimer;function buildPage(){var e=JSON.parse(fishyNetJSON).fishyDevices,l=[];$.each(e,function(e,t){l.push(addDevice(t))}),$(\"<div/>\",{class:\"flex-container\",html:l.join(\"\")}).appendTo(\"body\"),pollTimer=setTimeout(function(){pollJSON()},1e4)}window.onload=buildPage(),$(\".cfgInp\").keyup(function(e){var t=$.trim($(this).val());if(\"\"!=t){/^[A-Za-z0-9_ .,-]+$/.test(t)||(alert(\"Only letters, numbers, underscore, space, comma, period, and dash are allowed.\"),$(this).val($(this).val().replace(/[^A-Za-z0-9_ .,-]/g,\"\")))}})</script>";

//the end
const char WEBSTRPT5[] PROGMEM = "<div class=fishyFtr><div class=swRow><label class=sw id=swRefresh-1><input checked id=swRefreshChck-1 onchange=refreshToggle() type=checkbox><span class=sldSw></span></label><span class=swLab id=swRefreshLab-1>AutoRefresh On</span></div></div>";